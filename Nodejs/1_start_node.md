## 1. 노드의 정의
- 공식 홈페이지의 설명 : Node.js는 크롬 V8 자바스크립트 엔진으로 빌드된 자바스크립트 `런타임`이다.
- 런타임 : 특정 언어로 만든 프로그램을 실행할 수 있게 만들어주는 가상머신
- 쉽게 말하면 실행기로, Node.js는 js를 실행시켜준다. 보통 js는 html에 엮여서 브라우저가 실행해주는데, Node.js는 이 브라우저를 넘어서 js를 실행시켜준다. 
Java의 경우는 JRE가 런타임이고, TypeScript의 경우는 Deno가 런타임이다.

### 내부구조
- 노드는 V8엔진과 libuv를 내부적으로 포함
- libuv : 노드의 특성인 이벤트 기반, 논블로킹 I/O 모델을 구현한 라이브러리
- 노드는 싱글쓰레드에 논블로킹 I/O이다.

---
## 2. 노드의 특성
### 이벤트 기반
- 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식
- 이벤트 리스너: 이벤트를 등록하는 함수
- 콜백 함수: 이벤트가 발생했을 때 실행될 함수

![image](https://user-images.githubusercontent.com/60607880/112587294-af000f80-8e40-11eb-8f1d-1f356895fcbf.png)

### 논블로킹 I/O
- 논블로킹 : 오래걸리는 함수를 백그라운드로 보내서 다음 코드가 먼저 실행되게 하고, 나중에 오래걸리는 함수를 실행
- 일부코드 : I/O 작업(파일 시스템 접근, 네트워크 요청), 압축, 암호화 등
- 나머지 코드는 블로킹 방식으로 실행됨
- 지금 당장은, 블로킹은 동기고 논블로킹은 비동기다 라고만 생각해둘것(노드에서만), 원래는 이 4가지 개념은 서로 다른것임
- 동기는 코드가 순서대로 실행되고, 비동기면 코드가 순서대로 실행되지 않을 수도 있다.
- 비동기 식은 어떤 규칙에 의해서 작업을 결정하게 되는데 이는 차후에 실행 컨텍스트와 이벤트 루프를 배울때 자세히 알아보자.
- I/O 작업이 많을 때 노드 활용성이 극대화

![image](https://user-images.githubusercontent.com/60607880/112723350-58362b00-8f51-11eb-9745-6ab557b37278.png)

## 3. 프로세스 VS 스레드
- 프로세스 : 운영체제에서 할당하는 작업의 단위, 프로세스 간 자원 공유X
- 스레드 : 프로세스 내에서 실행되는 작업의 단위, 부모 프로세스 자원 공유

- 노드 프로세스는 멀티 스레이이지만 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현
- 노드는 주로 멀티스레드 대신 멀티 프로세스 활용
- 14버전 부터 멀티 스레드 사용가능

## 4. 싱글스레드
- 블로킹이 발생하는 경우 나머지 작업은 모두 대기해야함 -> 비효율
- 싱글스레드 모델은 에러를 처리하지 못하는 경우 멈춤 -> 프로그래밍 난이도 쉽고, CPU, 메모리 자원 적게 사용

## 5. 멀티스레드 
- 멀티스레드 모델은 에러 발생 시 새로운 스레드를 생성하여 극복
- 단, 새로운 스레드 생성이나 놀고있는 스레드 처리에 비용 발생
- 프로그래밍 난이도 어려움
- 스레드 수만큼 자원을 많이 사용함

## 노드의 해결책
대신 논블로킹 모델을 채택하여 일부코드(I/O)를 백그라운드(다른 프로세스)에서 실행가능

- 요청을 먼저 받고, 완료될 때 응답함
- I/O 관련코드가 아닌 경우, 싱글 스레드, 블로킹 모델과 같아짐
![image](https://user-images.githubusercontent.com/60607880/112723880-080c9800-8f54-11eb-877e-4f73b6a544a4.png)

- 노드는 너무 어려운 멀티스레딩은 과감히 버리고 효율적인 싱글스레딩을 채택했다. 14버전에서부터 멀티스레딩을 지원하지만, 싱글스레딩이 주력이다.

