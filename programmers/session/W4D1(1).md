## ìŠ¤í”„ë§ í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°

- ì¼ë°˜ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì…ìê°€ ê±°ì¹ ìˆ˜ë¡ ë¶€ì„œì§€ê¸° ì‰½ê³  ì‹¤í–‰í•˜ëŠ” ë° ì‹œê°„ì´ ë§ì´ ê±¸ë¦¬ë©° ì‘ì„± ë° ìœ ì§€ ê´€ë¦¬ê°€ ì–´ë µìŠµë‹ˆë‹¤.

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

- ë‹¨ìœ„í…ŒìŠ¤íŠ¸ëŠ” íŠ¹ì • ë¶€ë¶„ì„ ê³ ë¦½í•´ì„œ í…ŒìŠ¤íŠ¸í•œë‹¤.
- SUT : System under test -> í…ŒìŠ¤íŠ¸í•˜ëŠ” ëŒ€ìƒ, ë‹¨ìœ„í…ŒìŠ¤íŠ¸ì˜ í•˜ë‚˜ì˜ ëŒ€ìƒ = í•˜ë‚˜ì˜ í´ë˜ìŠ¤
- SUT ë‚´ë¶€ì— ë©”ì„œë“œë“¤ì„ í…ŒìŠ¤íŠ¸í•¨
- ì˜ì¡´ê´€ê³„ì— ìˆëŠ” ê°ì²´ë“¤ì„ í˜‘ë ¥ê´€ê³„ìë¼ê³  í•˜ê³ , ì´ë“¤ì„ ê°™ì´ ë¬¶ì–´ì„œ í…ŒìŠ¤íŠ¸í•˜ì§€ì•Šê³ , í…ŒìŠ¤íŠ¸ ë”ë¸” ë°”ê¿”ì„œ ê³ ë¦½ëœ ìƒíƒœë¡œ ì§„í–‰í•˜ëŠ” ê²ƒì´ ìœ ë‹›í…ŒìŠ¤íŠ¸ì´ë‹¤.
  > í…ŒìŠ¤íŠ¸ ë”ë¸” : í…ŒìŠ¤íŠ¸ ë”ë¸”ì€ ì˜ì¡´ êµ¬ì„±ìš”ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ ë•Œ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ì½”ë“œì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤. => ìœ ë‹›í…ŒìŠ¤íŠ¸ë¥¼ ê³ ë¦½ì‹œí‚¤ê¸° ìœ„í•œ ì§í‰(Stub, Mock ê°ì²´)
- ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” GIVEN, WHEN, THEN ìœ¼ë¡œ êµ¬ì„±ëœë‹¤
- ~ ìƒí™©ì´ ì£¼ì–´ì§€ê³ , íŠ¹ì • ë©”ì„œë“œê°€ í˜¸ì¶œ ë  ë•Œ~, íŠ¹ì • ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤~
- ë‹¨ìœ„í…ŒìŠ¤íŠ¸ì˜ ëª©ì  : ì†Œí”„íŠ¸ì›¨ì–´ì˜ ì§€ì†ì ì¸ ë³€ê²½ì— ëŒ€í•œ ë³´í˜¸ë¥¼ ë°›ëŠ”ë‹¤(í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ì„œ), ì½”ë“œ ê¸°ëŠ¥ì— ëŒ€í•œ ëª…ì„¸(í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë³´ê³  ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ)
- EX : ê³„ì‚°ê¸°(SUT) ì•ˆì— ë©”ì„œë“œ ADD, SUB, MUL, DIV
  - GIVEN : 2 ì™€ 3ì´ ì£¼ì–´ì§€ë©´(ì „ì œì¡°ê±´)
  - WHEN : ADD ë¥¼ í˜¸ì¶œí•˜ë©´
  - THEN : 5ê°€ ë¦¬í„´ë˜ì•¼í•œë‹¤.
  - ë§Œì•½ ì œê³±ê·¼ì„ êµ¬í•˜ëŠ” ë©”ì„œë“œê°€ ì¶”ê°€ëœë‹¤ë©´, ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ì„œ ê¸°ì¡´ì˜ ì½”ë“œì˜ ê²€ì¦ì´ ê°€ëŠ¥í•˜ë‹¤.
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” í´ë˜ìŠ¤ë‚´ë¶€ì˜ í•„ìš” ë©”ì„œë“œë§ˆë‹¤ ì§„í–‰ë˜ì–´ì•¼í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ì˜ ë„ì›€ì„ ë§ì´ ë°›ì„ ìˆ˜ëŠ” ì—†ë‹¤. í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì— ì§‘ì¤‘í•´ì„œ ì‘ì„±í•˜ë˜, ì˜ì¡´ê´€ë ¨ì€ í…ŒìŠ¤íŠ¸ ë”ë¸”ì„ í†µí•´ì„œ
- ì¢‹ì€ ìƒí™©ë§Œ ë„£ëŠ” ê²ƒì´ ì•„ë‹Œ ë‚˜ìœ ìƒí™©ë„ ë˜ì•¼í•©ë‹ˆë‹¤.

### í†µí•© í…ŒìŠ¤íŠ¸

- ë‹¤ë¥¸ ì˜ì¡´ê´€ê³„ì™€ ì—°ë™ì´ ì˜ ë˜ëŠ”ì§€ í™•ì¸, ëª¨ë“ˆê°„ì˜ ì—°ë™ê³¼, ì™¸ë¶€ì™€ì˜ ì—°ê²° í…ŒìŠ¤íŠ¸ë„ í†µí•©í…ŒìŠ¤íŠ¸ë¡œ ë³¼ ìˆ˜ìˆìŒ

### CodeUtopia ê¸€ ì •ë¦¬

- ë‹¨ìœ„í…ŒìŠ¤íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ëœ í•¨ìˆ˜ì— ì¼ë¶€ ì…ë ¥ì„ ì œê³µí•œ ë‹¤ìŒ í•¨ìˆ˜ ì¶œë ¥ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- ë‹¨ìœ„í…ŒìŠ¤íŠ¸ê°€ ì‘ì„±ì´ ì–´ë ¤ìš´ ì½”ë“œë¼ë©´ ê·¸ ì½”ë“œìì²´ê°€ ë¬¸ì œì¼ ê°€ëŠ¥ì„±ì´ í¬ë‹¤, ì¼ë°˜ì ìœ¼ë¡œ ë””ìì¸ì´ ì¢‹ì§€ ì•Šì€ ì½”ë“œ
- ë‹¨ìœ„í…ŒìŠ¤íŠ¸ëŠ” êµ¬ì²´ì ì´ê¸° ë•Œë¬¸ì— ë²„ê·¸ë¥¼ ì°¾ê¸°ê°€ ì‰¬ì›€

### JUnit

- ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ ì œê³µ

  - ë§¤ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì‹œë§ˆë‹¤ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì–´ ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥
  - ì—ë„ˆí…Œì´ì…˜ì„ ì œê³µí•´ì„œ í…ŒìŠ¤íŠ¸ ë¼ì´í”„ ì‚¬ì´í´ì„ ê´€ë¦¬í•˜ê²Œ í•´ì£¼ê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ë„ë¡ ì§€ì›
  - í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆë¥¼ ì œê³µí•´ì„œ ì¸í…”ë¦¬ì œì´/ë©”ì´ë¸/ì´í´ë¦½ìŠ¤ ë“±ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‰½ê²Œ ì‹¤í–‰
  - assertë¡œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ìˆ˜í–‰ ê²°ê³¼ë¥¼ íŒë³„í•˜ê²Œ í•´ì¤Œ -> assertEquals(ì˜ˆìƒ ê°’, ì‹¤ì œ ê°’)
  - ê²°ê³¼ëŠ” ì„±ê³µ(ë…¹ìƒ‰), ì‹¤íŒ¨(ë¶‰ì€ìƒ‰) ì¤‘ í•˜ë‚˜ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.

- Junit 5ê°€ ìµœì‹ ì´ë©° Junit4ëŠ” ëª¨ë†€ë¦¬í‹± ëª¨ë“ˆì´ì—ˆì§€ë§Œ, 5ì—ì„œ 3ê°œì˜ ëª¨ë“ˆë¡œ ë‚˜ë‰¨
  - JUnit Platform
  - JUnit Jupiter
  - Junit Vintage

---

## JUnit ì‹¤ìŠµ

### ì‹¤ìŠµí•˜ì

1. assertEquals()

```java
// SUT
class FixedAmountVoucherTest {

    @Test
    void nameAssertEqual() {
        assertNotEquals("ì—ìƒê°’", "ì‹¤ì œê°’");    }
    // MUT
    @Test
    void testDiscount() {
    }

}
```

2. discount

```java
class FixedAmountVoucherTest {

    @Test
    void testAssertEqual() {
        assertEquals("1", "1");    }
    // MUT
    @Test
    void testDiscount() {
        var sut = new FixedAmountVoucher(UUID.randomUUID(), 100);
        // discountë¡œ ì¸í•´ í• ì¸ëœ ê¸ˆì•¡ì´ ê²€ì¦ë˜ê²Œ(given-when-then)
        assertEquals(900, sut.discount(1000));
    }
}
```

3. DisplayName()

- í…ŒìŠ¤íŠ¸ì— ì´ë¦„ì„ ë¶€ì—¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥(ì´ëª¨ì§€ë„ ë¨)

```java
    @Test
    @DisplayName("ê¸°ë³¸ì ì¸ assertEqual í…ŒìŠ¤íŠ¸ ğŸ§¡")
    void testAssertEqual() {
        assertEquals("1", "1");    }
```

4. ë‚˜ìœ ìƒí™©ë„ ìƒê°í•´ì•¼í•œë‹¤. - AssertThrows(ì˜ˆì™¸ í´ë˜ìŠ¤, ìµìŠ¤íí„°ë¸”(ì‹¤í–‰ê°€ëŠ¥í•œ))

- assertThrows ëŠ” 2ë²ˆì§¸ ì¸ìë¡œ ë“¤ì–´ê°„ ìµìŠ¤íí„°ë¸”ì´ ì˜ˆì™¸ë¥¼ ë˜ì§€ë©´ ì„±ê³µí•œë‹¤.

```java
    @Test
    @DisplayName("í• ì¸ ê¸ˆì•¡ì€ ë§ˆì´ë„ˆìŠ¤ê°€ ë  ìˆ˜ ì—†ë‹¤")
    void testWithMinus() {
        assertThrows(IllegalArgumentException.class, () -> new FixedAmountVoucher(UUID.randomUUID(), -100));
    }
```

5. Disabledë¥¼ í†µí•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìŠ¤í‚µ ê°€ëŠ¥í•˜ë‹¤.

```java
    @Test
    @Disabled
    @DisplayName("í• ì¸ ê¸ˆì•¡ì€ ë§ˆì´ë„ˆìŠ¤ê°€ ë  ìˆ˜ ì—†ë‹¤")
    void testWithMinus() {
```
6. beforeAll, beforeEach
- beforeAllì€ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ê°€ ìƒì„±ë  ë•Œ, í•œë²ˆë§Œ ì‹¤í–‰ë˜ê³ , beforeEachëŠ” í´ë˜ìŠ¤ë‚´ì˜ ë©”ì„œë“œê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ëœë‹¤.
- BeforeAllì€ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ê°€ ìƒì„±ë  ë•Œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ í•¨ìˆ˜ëŠ” staticìœ¼ë¡œ ì‘ì„±ë˜ì•¼í•œë‹¤.
```java
class FixedAmountVoucherTest {

    private static final Logger logger = LoggerFactory.getLogger(FixedAmountVoucherTest.class);

    @BeforeAll
    static void setup(){
        logger.info("BeforeAll - ë‹¨ í•œë²ˆ ì‹¤í–‰");
    }

    @BeforeEach
    void init(){
        logger.info("BeforeEach - ë§¤ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ì‹¤í–‰");
    }
    ...
}

// ê²°ê³¼ê°’
2021-08-23 17:45:06.109  INFO   --- [    Test worker] o.p.w3d1.voucher.FixedAmountVoucherTest  : BeforeAll - run once
2021-08-23 17:45:06.126  INFO   --- [    Test worker] o.p.w3d1.voucher.FixedAmountVoucherTest  : BeforeEach - run before each test method
2021-08-23 17:45:06.142  INFO   --- [    Test worker] o.p.w3d1.voucher.FixedAmountVoucherTest  : BeforeEach - run before each test method
2021-08-23 17:45:06.147  INFO   --- [    Test worker] o.p.w3d1.voucher.FixedAmountVoucherTest  : BeforeEach - run before each test method
```
- AfterAll, AfterEach ì—­ì‹œ ì´ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ë‹¤.
7. AssertAll : ë§ì€ ì–‘ì˜ í…ŒìŠ¤íŠ¸ë¥¼ í•œë²ˆì— í•  ìˆ˜ ìˆë‹¤. ì—¬ëŸ¬ê°œì˜ ìµìŠ¤íí„°ë¸”ì„ ë„£ì–´ì„œ í•˜ëŠ” ë°©ì‹ì´ë‹¤.
```java
    @Test
    @DisplayName("ìœ íš¨í•œ í• ì¸ ê¸ˆì•¡ìœ¼ë¡œë§Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.")
    void testVoucherCreation() {
        assertAll("FixedAmountVoucher creation",
                () -> assertThrows(IllegalArgumentException.class, () -> new FixedAmountVoucher(UUID.randomUUID(), 0)),
                () -> assertThrows(IllegalArgumentException.class, () -> new FixedAmountVoucher(UUID.randomUUID(), -100)),
                () -> assertThrows(IllegalArgumentException.class, () -> new FixedAmountVoucher(UUID.randomUUID(), 100000)));
    }
```
- BDD, TDD ë‹¤ ì¤‘ìš”í•œ ê°œë…ì´ì§€ë§Œ ê²°êµ­ ì¤‘ìš”í•œ ê²ƒì€ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ì¦ëª…ì´ ë˜ì•¼í•œë‹¤.

### Ham crest
- í…ŒìŠ¤íŠ¸í• ë•Œ ì „ë‹¬í•˜ëŠ” ì¸ìì— ëŒ€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ì˜ì¡´ì„±ìœ¼ë¡œ ë“¤ê³ ì˜¬ìˆ˜ë„ ìˆì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ import ë¬¸ìœ¼ë¡œë„ ê°€ëŠ¥
```java
package org.prgms.w3d1.voucher;

import static org.hamcrest.Matchers.*;

public class HamcrestAssertionTests {
    
}
```
- ìœ„ì˜ ì˜ˆì‹œì™€ ë¹„êµí•˜ì
1. is, equalTo : ë™ë“±í•œê°€?
```java
@Test
    @DisplayName("ì—¬ëŸ¬ hamcrest matcher í…ŒìŠ¤íŠ¸")
    void hamcrestTest(){
        assertEquals(2, 1 + 1);
        assertThat(1 + 1, equalTo(2));
        assertThat(1 + 1, is(2));
    }
```

2. anyOf() : ì´ ì¤‘ì— í•˜ë‚˜ë§Œ ë˜ë©´ í•©ê²©
```java
        assertThat(1 + 1, anyOf(is(1), is(2)));
```

3. ì»¬ë ‰ì…˜ í…ŒìŠ¤íŠ¸
```java
    void hamcrestMatcherTest(){
        var prices = List.of(2, 3, 4);
        // sizeê°€ 3ì´ë©´ í†µê³¼
        assertThat(prices, hasSize(3));
        // ëª¨ë“  ì•„ì´í…œì´ 0ë³´ë‹¤ í¬ë©´ í†µê³¼
        assertThat(prices, everyItem(greaterThan(0)));
        // ìˆœì„œ ìƒê´€ ì—†ì´ listì— ë“¤ì–´ìˆìœ¼ë©´ í†µê³¼
        assertThat(prices, containsInAnyOrder(3, 4, 2));
        // ìˆœì„œ ê°’ ëª¨ë‘ ì¼ì¹˜ í•˜ë©´ í†µê³¼
        assertThat(prices, contains(2, 3, 4));
        // ë¦¬ìŠ¤íŠ¸ì— 2ê°€ ìˆìœ¼ë©´ í†µê³¼
        assertThat(prices, hasItem(2));
        // ë¦¬ìŠ¤íŠ¸ì— 2 ì´ìƒì¸ê²Œ ìˆìœ¼ë©´ í†µê³¼
        assertThat(prices, hasItem(greaterThanOrEqualTo(2)));
    }
```
___